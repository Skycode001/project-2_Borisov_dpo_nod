# Project #2: Primitive Database

Консольное приложение для работы с базой данных на Python.

## Технологии
- Python 3.8+
- Poetry для управления зависимостями
- Git для контроля версий
- Ruff для линтинга и форматирования кода
- PrettyTable для форматированного вывода таблиц

## Установка
```bash
# Клонирование репозитория
git clone https://github.com/Skycode001/project-2_Borisov_dpo_nod.git
cd project-2_Borisov_dpo_nod

# Создание виртуального окружения и установка зависимостей
make install
source .venv/bin/activate

# Альтернативно через Poetry
poetry install
```

## Запуск
```bash
# Через Makefile
make project

# Или напрямую через Python
python3 -m src.primitive_db.main

# Или через установленный пакет (после poetry install)
poetry run project
poetry run database
```
## Поддерживаемые типы данных
- int - целые числа
- str - строки
- bool - логические значения (True/False)

## Управление таблицами
# Доступные команды
- create_table <имя_таблицы> <столбец1:тип> ... - "Создать новую таблицу"
- list_tables - "Показать список всех таблиц"
- drop_table <имя_таблицы> - "Удалить таблицу"
- help - "Показать справку по командам"
- exit - "Выйти из программы"
# CRUD-операции
- insert into <таблица> values (значение1, ...) - "Добавить запись"
- select from <таблица> - "Показать все записи"
- select from <таблица> where <условие> - "Показать записи по условию"
- update <таблица> set <столбец>=<значение> where <условие> - "Обновить запись"
- delete from <таблица> where <условие> - "Удалить запись"
- info <таблица> - "Информация о таблице"

## Пример установки пакета, запуска БД, создания, проверки и удаления таблицы.
[![asciicast](https://asciinema.org/a/V5zQckptHgseXK34PCa3dWAP3.svg)](https://asciinema.org/a/V5zQckptHgseXK34PCa3dWAP3)

## Пример использования CRUD-операций
[![asciicast](https://asciinema.org/a/obZUiqp8ggPa8CmxAg0pwJsTi.svg)](https://asciinema.org/a/obZUiqp8ggPa8CmxAg0pwJsTi)

## Пример использования
```bash
# Запуск приложения
$ make project

***База данных***
Функции:
<command> create_table <имя_таблицы> <столбец1:тип> <столбец2:тип> .. - создать таблицу
<command> list_tables - показать список всех таблиц
<command> drop_table <имя_таблицы> - удалить таблицу
<command> exit - выход из программы
<command> help - справочная информация

>>>Введите команду: create_table users name:str age:int is_active:bool
Таблица "users" успешно создана со столбцами: ID:int, name:str, age:int, is_active:bool

>>>Введите команду: list_tables
+----------+---------------------------------------------------+
| Таблица  | Столбцы                                           |
+----------+---------------------------------------------------+
| users    | ID:int, name:str, age:int, is_active:bool        |
+----------+---------------------------------------------------+

>>>Введите команду: create_table products title:str price:int
Таблица "products" успешно создана со столбцами: ID:int, title:str, price:int

>>>Введите команду: list_tables
+-----------+-----------------------------------------------+
| Таблица   | Столбцы                                       |
+-----------+-----------------------------------------------+
| users     | ID:int, name:str, age:int, is_active:bool    |
| products  | ID:int, title:str, price:int                 |
+-----------+-----------------------------------------------+

>>>Введите команду: drop_table users
Таблица "users" успешно удалена.

>>>Введите команду: list_tables
+-----------+---------------------------------------+
| Таблица   | Столбцы                               |
+-----------+---------------------------------------+
| products  | ID:int, title:str, price:int         |
+-----------+---------------------------------------+

>>>Введите команду: exit
Выход из программы...
```

## Обработка ошибок
При вводе некорректных данных программа выводит понятные сообщения об ошибках:
```bash
# Попытка создать таблицу с неподдерживаемым типом данных
>>>Введите команду: create_table test data:float
Неподsupported тип данных: float в столбце data. Используйте int, str, bool.

# Попытка создать таблицу с некорректным форматом столбца
>>>Введите команду: create_table test name age:int
Некорректный формат столбца: name. Используйте формат "имя:тип"

# Попытка создать таблицу с пустым именем
>>>Введите команду: create_table   name:str
Ошибка: Имя таблицы не может быть пустым.

# Попытка удалить несуществующую таблицу
>>>Введите команду: drop_table unknown
Ошибка: Таблица "unknown" не существует.

# Ввод неизвестной команды
>>>Введите команду: unknown_command
Функции 'unknown_command' нет. Попробуйте снова.
```

## Особенности реализации
- Автоматический столбец ID: При создании любой таблицы автоматически добавляется столбец ID:int в качестве первичного ключа.
- Хранение метаданных: Информация о таблицах сохраняется в файле db_meta.json в формате JSON.
- Постоянное хранение: Данные сохраняются между сеансами работы с программой.
- Валидация данных: Проверяется корректность типов данных, форматов столбцов и уникальность имен таблиц.

## Команды разработки
```bash
# Проверка кода
make lint

# Форматирование кода
make format

# Автоисправление ошибок
make lint-fix

# Очистка временных файлов
make clean

# Показать справку по командам
make help
```